<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ombre Flower Collection Grid</title>
  <link rel="stylesheet" href="style.css">
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ðŸŒ¸</text></svg>">
  <script>
    const WEBAPP_URL = 'YOUR_WEBAPP_URL';

    async function submitFlower(data) {
      const resp = await fetch(WEBAPP_URL, {
        method: 'POST',
        headers: { 'Content-Type': 'application/x-www-form-urlencoded' },
        body: new URLSearchParams(data)
      });
      return resp.json();
    }

    function onClickFlower(color1, color2, flowerId) {
      const player = prompt("Enter your player name:");
      if (!player) return;
      const share = confirm("Share flower collection with community?");
      const fields = {
        'What is your player name?': player,
        'Share flower collection with community?': share,
        'What is the breed of flower?': 'Hybrid',
        'What is the flower pattern?': 'Ombre',
        'What is the color of your flower?': `${color1} to ${color2}`,
        'What is the first color of your flower?': color1,
        'What is the second color of your flower?': color2,
        'Flower ID': flowerId
      };
      submitFlower(fields)
        .then(r => {
          if (r.result === 'success') alert('ðŸŒ¸ Flower logged successfully!');
          else alert('Oops, something went wrong.');
        });
    }

    const colors = [
      'White', 'Red', 'Warm Pink', 'Coral', 'Blush', 'Orange', 'Peach', 'Yellow', 'Cream',
      'Lime', 'Pistachio', 'Green', 'Mint', 'Teal', 'Seafoam', 'Sky', 'Cloud', 'Blue', 'Ice',
      'Indigo', 'Periwinkle', 'Violet', 'Lilac', 'Magenta', 'Cool Pink', 'Hot Pink', 'Pink'
    ];

    function getColorHex(name) {
      const map = {
        'White': '#FFFFFF', 'Red': '#DC143C', 'Warm Pink': '#FF69B4', 'Coral': '#FF7F50',
        'Blush': '#DE5D83', 'Orange': '#FF8C00', 'Peach': '#FFCBA4', 'Yellow': '#FFD700',
        'Cream': '#F5F5DC', 'Lime': '#32CD32', 'Pistachio': '#93C572', 'Green': '#228B22',
        'Mint': '#98FB98', 'Teal': '#008B8B', 'Seafoam': '#20B2AA', 'Sky': '#87CEEB',
        'Cloud': '#B0C4DE', 'Blue': '#4169E1', 'Ice': '#B0E0E6', 'Indigo': '#4B0082',
        'Periwinkle': '#C5C5FF', 'Violet': '#8A2BE2', 'Lilac': '#DDA0DD', 'Magenta': '#FF00FF',
        'Cool Pink': '#FF1493', 'Hot Pink': '#FF69B4', 'Pink': '#FFC0CB'
      };
      return map[name] || '#eee';
    }

    window.addEventListener('DOMContentLoaded', () => {
      const thead = document.querySelector('.collection-grid thead tr');
      const tbody = document.querySelector('.collection-grid tbody');

      colors.forEach(color => {
        const th = document.createElement('th');
        th.className = 'col-header';
        th.textContent = color;
        thead.appendChild(th);
      });

      colors.forEach((primary, rowIndex) => {
        const row = document.createElement('tr');
        const rowHeader = document.createElement('td');
        rowHeader.className = 'row-header';
        rowHeader.textContent = primary;
        row.appendChild(rowHeader);

        colors.forEach((pattern, colIndex) => {
          const cell = document.createElement('td');
          cell.className = 'data-cell';

          if (primary === pattern) {
            cell.style.backgroundColor = '#f5f5f5';
          } else {
            const flowerId = `OMBRE_${primary.replace(/\s/g, '')}_${pattern.replace(/\s/g, '')}`;
            const button = document.createElement('div');
            button.className = 'checkmark-button';
            button.textContent = 'âœ”';
            button.onclick = () => onClickFlower(primary, pattern, flowerId);
            cell.appendChild(button);

            cell.addEventListener('mouseenter', () => {
              highlightGrid(rowIndex, colIndex, primary, pattern);
            });

            cell.addEventListener('mouseleave', () => {
              clearHighlightGrid();
            });
          }

          row.appendChild(cell);
        });

        tbody.appendChild(row);
      });
    });

    function highlightGrid(rowIndex, colIndex, rowColorName, colColorName) {
      const rows = document.querySelectorAll('.collection-grid tbody tr');
      const headerRow = document.querySelectorAll('.collection-grid thead tr th');
      const colHex = getColorHex(colColorName);
      const rowHex = getColorHex(rowColorName);

      rows.forEach((row, rIdx) => {
        const cells = row.querySelectorAll('td');
        if (rIdx === rowIndex) {
          row.style.backgroundColor = colHex;
        }
        cells.forEach((cell, cIdx) => {
          if (cIdx === colIndex + 1) {
            cell.style.backgroundColor = rowHex;
          }
        });
      });

      if (headerRow[colIndex + 1]) {
        headerRow[colIndex + 1].style.backgroundColor = rowHex;
      }
    }

    function clearHighlightGrid() {
      document.querySelectorAll('.collection-grid tr').forEach(row => {
        row.style.backgroundColor = '';
        row.querySelectorAll('td, th').forEach(cell => {
          cell.style.backgroundColor = '';
        });
      });
    }
  </script>
  <style>
    .grid-container {
      overflow-x: auto;
      padding: 40px 20px;
    }
    .collection-grid {
      border-collapse: collapse;
      width: 100%;
      font-size: 0.75em;
    }
    .collection-grid th,
    .collection-grid td {
      border: 1px solid #dee2e6;
      padding: 4px;
      text-align: center;
    }
    .corner-cell {
      background: #eee;
      font-weight: bold;
    }
    .col-header {
      writing-mode: vertical-lr;
      text-orientation: mixed;
      min-height: 120px;
    }
    .row-header {
      font-weight: 600;
      white-space: nowrap;
    }
    .data-cell {
      width: 32px;
      height: 32px;
      position: relative;
    }
    .checkmark-button {
      display: inline-block;
      width: 24px;
      height: 24px;
      line-height: 24px;
      background: #ff6b9d;
      color: white;
      font-weight: bold;
      border-radius: 4px;
      font-size: 14px;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <!-- Header -->
  <header class="header">
    <div class="container">
      <h1>ðŸŒ¸ HKIA Ombre Flower Tracker ðŸŒ¸</h1>
      <p>Click a cell to log an ombre flower combination</p>
    </div>
  </header>

  <!-- Navigation -->
  <nav class="nav">
    <div class="container">
      <div class="nav-brand">ðŸŒº FlowerTracker</div>
      <div class="nav-links">
        <a href="index.html" class="nav-link">Home</a>
        <a href="#collection" class="nav-link active">Ombre Grid</a>
        <a href="#community" class="nav-link">Community</a>
        <a href="#leaderboards" class="nav-link">Leaderboards</a>
      </div>
      <button class="mobile-menu-btn">â˜°</button>
    </div>
  </nav>

  <!-- Main Grid -->
  <main class="grid-container">
    <table class="collection-grid">
      <thead>
        <tr>
          <th class="corner-cell">Primary Color<br>â†“ Pattern Color â†’</th>
        </tr>
      </thead>
      <tbody>
      </tbody>
    </table>
  </main>

  <!-- Footer -->
  <footer class="footer">
    <div class="container">
      <div class="footer-content">
        <div class="footer-section">
          <h4>ðŸŒ¸ HKIA Flower Tracker</h4>
          <p>Built by the community, for the community. Track your Hello Kitty Island Adventure flower collection with friends!</p>
        </div>
        <div class="footer-section">
          <h4>Quick Links</h4>
          <ul>
            <li><a href="#" onclick="openCollectionForm()">Log Flowers</a></li>
            <li><a href="#" onclick="openPersonalDashboard()">My Dashboard</a></li>
            <li><a href="#" onclick="openCommunityDashboard()">Community Data</a></li>
          </ul>
        </div>
        <div class="footer-section">
          <h4>Community</h4>
          <ul>
            <li><a href="#" onclick="showAbout()">About This Project</a></li>
            <li><a href="#" onclick="showHelp()">How to Use</a></li>
            <li><a href="#" onclick="showContact()">Contact & Feedback</a></li>
          </ul>
        </div>
      </div>
      <div class="footer-bottom">
        <p>&copy; 2025 HKIA Flower Tracker Community Project | Made with ðŸ’– for Hello Kitty Island Adventure players</p>
      </div>
    </div>
  </footer>
</body>
</html>
